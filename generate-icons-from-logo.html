<!DOCTYPE html>
<html>
<head>
  <title>Generate Chrome Extension Icons from Logo</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .upload-section {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      text-align: center;
      margin-bottom: 30px;
    }
    
    #fileInput {
      display: none;
    }
    
    .upload-button {
      display: inline-block;
      padding: 12px 24px;
      background: #611f69;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s;
    }
    
    .upload-button:hover {
      background: #4a154b;
    }
    
    .instructions {
      margin-top: 20px;
      color: #666;
      line-height: 1.6;
    }
    
    .icon-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    .icon-box {
      background: white;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .icon-box h3 {
      margin: 0 0 15px 0;
      color: #333;
      font-size: 16px;
    }
    
    canvas {
      border: 1px solid #e0e0e0;
      display: block;
      margin: 0 auto 15px;
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
    }
    
    .download-btn {
      display: inline-block;
      padding: 8px 16px;
      background: #4CAF50;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      font-size: 14px;
      transition: background 0.2s;
    }
    
    .download-btn:hover {
      background: #45a049;
    }
    
    .source-preview {
      margin: 20px 0;
    }
    
    .source-preview img {
      max-width: 200px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    
    .quick-copy {
      background: #f0f8ff;
      border: 1px solid #d0e5ff;
      border-radius: 6px;
      padding: 15px;
      margin-top: 20px;
      font-family: monospace;
      font-size: 13px;
      color: #0051c3;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¨ Generate Chrome Extension Icons</h1>
  
  <div class="upload-section">
    <h2>Option 1: Upload Your Logo</h2>
    <label for="fileInput" class="upload-button">Choose Logo File</label>
    <input type="file" id="fileInput" accept="image/*">
    <div class="source-preview" id="sourcePreview" style="display: none;">
      <p>Source image:</p>
      <img id="previewImg">
    </div>
    
    <div class="instructions">
      <p>Upload your Emoji Studio logo (recommended: use the 512x512 version for best quality)</p>
      <p>The tool will automatically generate all required icon sizes.</p>
    </div>
  </div>
  
  <div class="upload-section">
    <h2>Option 2: Copy Logo from Emoji Studio</h2>
    <div class="quick-copy">
      cp /Users/jason/Github/Emoji-Studio/public/logo-512.png ./source-logo.png
    </div>
    <p style="color: #666; margin-top: 10px;">Then refresh this page and upload source-logo.png</p>
  </div>
  
  <div id="iconGrid" class="icon-grid" style="display: none;"></div>

  <script>
    const sizes = [16, 32, 48, 128];
    const fileInput = document.getElementById('fileInput');
    const iconGrid = document.getElementById('iconGrid');
    const sourcePreview = document.getElementById('sourcePreview');
    const previewImg = document.getElementById('previewImg');
    
    fileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const img = new Image();
          img.onload = function() {
            generateIcons(img);
            previewImg.src = img.src;
            sourcePreview.style.display = 'block';
          };
          img.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    });
    
    function generateIcons(sourceImg) {
      iconGrid.innerHTML = '';
      iconGrid.style.display = 'grid';
      
      sizes.forEach(size => {
        const box = document.createElement('div');
        box.className = 'icon-box';
        
        const title = document.createElement('h3');
        title.textContent = `icon${size}.png (${size}Ã—${size})`;
        
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        
        const ctx = canvas.getContext('2d');
        
        // For small sizes, disable smoothing for pixel-perfect rendering
        if (size <= 32) {
          ctx.imageSmoothingEnabled = false;
        }
        
        // Draw the image scaled to fit
        ctx.drawImage(sourceImg, 0, 0, size, size);
        
        const downloadBtn = document.createElement('a');
        downloadBtn.className = 'download-btn';
        downloadBtn.textContent = 'Download';
        downloadBtn.download = `icon${size}.png`;
        downloadBtn.href = canvas.toDataURL('image/png');
        
        box.appendChild(title);
        box.appendChild(canvas);
        box.appendChild(downloadBtn);
        iconGrid.appendChild(box);
      });
      
      // Add download all button
      const downloadAllBox = document.createElement('div');
      downloadAllBox.className = 'icon-box';
      downloadAllBox.style.gridColumn = '1 / -1';
      downloadAllBox.innerHTML = `
        <h3>All Icons Generated! âœ…</h3>
        <p style="color: #666; margin: 10px 0;">Download each icon and save to the icons/ folder</p>
        <p style="color: #666; font-size: 14px;">Or use the command line with ImageMagick:</p>
        <div class="quick-copy" style="text-align: left; margin-top: 10px;">
${sizes.map(size => `convert source-logo.png -resize ${size}x${size} icons/icon${size}.png`).join('\n')}
        </div>
      `;
      iconGrid.appendChild(downloadAllBox);
    }
  </script>
</body>
</html>